var f=Object.defineProperty;var b=(i,e,t)=>e in i?f(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>(b(i,typeof e!="symbol"?e+"":e,t),t);import{P as l,p as c}from"./vendor.3d71c0c2.js";const g=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};g();const k="0.0.0";class u extends Phaser.Physics.Arcade.Sprite{constructor(e,t,a,s){super(e,t,a,"laser-bolts");r(this,"speed");switch(e.add.existing(this),e.physics.world.enable(this),this.body.setSize(8),this.body.isCircle=!0,this.setScale(d),this.speed=s,this.play(n.bolts2_run),Phaser.Math.RND.pick([1,2,3])){case 1:const h=this.scene.tweens.add({targets:this,y:e.player.y,x:e.player.x,ease:"Linear",duration:2e3,onComplete:()=>{this.destroy(),h.remove()}});break;case 2:const p=this.scene.tweens.add({targets:this,ease:"Linear",duration:2e3,y:`+=${e.scale.height}`,onComplete:()=>{this.destroy(),p.remove()}});break;default:const y=this.scene.tweens.add({targets:this,duration:2e3,y:`+=${e.scale.height}`,onComplete:()=>{this.destroy(),y.remove()}});break}}}const x={"enemy-small":2,"enemy-medium":3,"enemy-big":2},S={"enemy-small":[40,40],"enemy-medium":[100,80],"enemy-big":[2,2]};class w extends Phaser.Physics.Arcade.Sprite{constructor(e,t,a,s){super(e,t,a,"ship");r(this,"speed");r(this,"bulletSpeed");r(this,"mainScene");r(this,"timer");this.mainScene=e,this.speed=x[s],this.bulletSpeed=this.speed+2,e.add.existing(this),e.physics.world.enable(this);const[o,h]=S[s];this.body.setSize(o,h),this.setScale(d*.5);const p=`${s}_run`;this.play(n[p]),this.rotation=Math.PI,this.timer=e.time.addEvent({callback:this.fire.bind(this),loop:!0,delay:1e3})}fire(){const e=new u(this.mainScene,this.x,this.y+8+4,this.bulletSpeed);this.mainScene.enemyBoltsGroup.add(e)}destroySelf(){this.y>this.scene.scale.height&&this.destroy(!0)}destroy(e){this.timer.destroy(),super.destroy(e)}update(e,t){this.y+=this.speed,this.destroySelf()}}class m extends Phaser.Physics.Arcade.Sprite{constructor(e,t,a){super(e,t,a,"ship");r(this,"speed",5);r(this,"blood",3);r(this,"cursor");r(this,"skins");e.add.existing(this),e.physics.world.enable(this),this.skins=e.add.group(),this.setCollideWorldBounds(!0),this.body.setSize(35),this.body.isCircle=!0,this.play(n.ship_run),this.setScale(d/2),this.cursor=this.scene.input.keyboard.createCursorKeys(),this.setSkin()}fire(){this.scene.sound.play("Laser_002",{volume:.1});const e=[this.x,this.x-20,this.x+20].map(t=>{const a=this.scene.physics.add.sprite(t,this.y-32,"ship").setScale(d).setFrame(18);return a.body.setSize(10),a.body.isCircle=!0,a});this.scene.boltsGroup.addMultiple(e)}setSkin(){}skinFollowPlayer(){this.skins.children.each(e=>e.setPosition(this.x,this.y))}update(...e){this.cursor.up.isDown&&(this.y-=this.speed),this.cursor.down.isDown&&(this.y+=this.speed),this.cursor.left.isDown&&(this.x-=this.speed),this.cursor.right.isDown&&(this.x+=this.speed),Phaser.Input.Keyboard.JustDown(this.cursor.space)&&this.fire(),this.skinFollowPlayer()}}class _ extends l.Scene{constructor(){super({key:"MainScene"});r(this,"coins",0);r(this,"coinsText");r(this,"speed",5);r(this,"bulletSpeed",10);r(this,"bg");r(this,"player");r(this,"boltsGroup");r(this,"enemyBoltsGroup");r(this,"enemyGroup");r(this,"blood")}create(){this.add.group,this.add.text(this.scale.width/2,this.scale.height/2,"\u6E38\u620F\u5F00\u59CB"),this.boltsGroup=this.physics.add.group(),this.enemyGroup=this.physics.add.group({runChildUpdate:!0}),this.enemyBoltsGroup=this.physics.add.group({runChildUpdate:!0}),this.sound.play("music",{loop:!0,volume:.2}),this.coinsText=this.add.dynamicBitmapText(16,16,"Minecraft",`Coins: ${this.coins}`).setDepth(9).setScale(1),this.bg=this.add.tileSprite(0,0,256,608,"desert-background").setDisplaySize(this.scale.width,this.scale.height).setOrigin(0),this.blood=this.add.group();const e=this.add.sprite(0,this.scale.height,"ship").setOrigin(0,1).setFrame(0).setDisplaySize(40,40);this.blood.add(e);const t=this.add.sprite(e.getRightCenter().x,this.scale.height,"ship").setOrigin(0,1).setFrame(0).setDisplaySize(40,40);this.blood.add(t);const a=this.add.sprite(t.getRightCenter().x,this.scale.height,"ship").setOrigin(0,1).setFrame(0).setDisplaySize(40,40);this.blood.add(a),this.player=new m(this,this.scale.width/2,this.scale.height-32),this.physics.add.overlap(this.boltsGroup,this.enemyGroup,(s,o)=>{s.destroy(),o.body.enable=!1,this.anims.play({key:"explosion_run"},o),this.sound.play("Explode1",{volume:.1}),o.once(l.Animations.Events.ANIMATION_COMPLETE,()=>{o.destroy(),this.coinsText.text=`Coins: ${this.coins+=1}`})}),this.physics.add.overlap(this.player,this.enemyBoltsGroup,this.playerDestroyed.bind(this)),this.physics.add.overlap(this.player,this.enemyGroup,this.playerDestroyed.bind(this))}playerDestroyed(e,t){t instanceof u&&t.destroy(),e instanceof m&&(e.blood-=1,this.blood.children.entries[e.blood].setAlpha(0),this.sound.play("001",{volume:.1}),e.blood<=0&&(this.coinsText.text=`Coins: ${this.coins=0}`,this.anims.play({key:"explosion_run"},e),this.sound.play("Explode1",{volume:.1}),e.body.enable=!1,this.player.blood=3,this.blood.children.each(s=>{s.setAlpha(1)}),e.once(l.Animations.Events.ANIMATION_COMPLETE,()=>{this.player.setAlpha(0),this.player.setX(this.scale.width/2),this.player.setY(this.scale.height-32),this.anims.play({key:"ship_run"},e),this.player.setAlpha(1);const s=this.tweens.createTimeline();s.add({targets:this.player,y:"-=60",duration:300}),s.add({targets:this.player,alpha:{from:1,to:0},repeat:5,duration:300,yoyo:!0,onComplete:()=>{s.destroy(),e.body.enable=!0,e.setAlpha(1)}}),s.play()})))}generateEnemy(){const e=l.Math.RND.pick(["enemy-small","enemy-medium"]);this.enemyGroup.add(new w(this,l.Math.RND.between(0+16,this.scale.width-16),0,e))}checkBolts(){this.boltsGroup.children.each(e=>{const t=e;t.y<0?t.destroy():t.y-=this.bulletSpeed})}update(e,t){this.bg.tilePositionY-=1,this.player.update(),this.checkBolts(),this.enemyGroup.children.entries.length<6&&this.generateEnemy()}}class v extends c.exports.Scene{constructor(){super({key:"Preload"})}preload(){const e=this.add.text(this.scale.width/2,this.scale.height/2,"0%").setOrigin(.5);Object.entries(P).forEach(([t,a])=>{switch(this.load.setBaseURL("./assets/"),t){case"audio":a.forEach(s=>{this.load.audio(s.key,"audio/"+s.url)});break;case"sprites":a.forEach(s=>{this.load.spritesheet(s.key,"sprites/"+s.url,s.frame)});break;case"image":a.forEach(s=>{this.load.image(s.key,"image/"+s.url)});break}}),this.load.bitmapFont("Minecraft","font/font.png","font/font.xml"),this.load.on(c.exports.Loader.Events.PROGRESS,t=>{e.setText(`${parseInt(String(t*100))}%`)})}createAnimations(){this.anims.create({key:n.ship_run,frames:this.anims.generateFrameNumbers("ship",{frames:[0,1,2]}),repeat:-1,frameRate:10}),this.anims.create({key:n["enemy-small_run"],frames:this.anims.generateFrameNumbers("ship",{frames:[70,71,72]}),repeat:-1,frameRate:10}),this.anims.create({key:n["enemy-medium_run"],frames:this.anims.generateFrameNumbers("ship",{frames:[73,74]}),repeat:-1,frameRate:10}),this.anims.create({key:n["enemy-big_run"],frames:this.anims.generateFrameNumbers("enemy-big",{}),repeat:-1,frameRate:10}),this.anims.create({key:n.bolts1_run,frames:this.anims.generateFrameNumbers("laser-bolts",{frames:[2,3]}),repeat:-1,frameRate:7}),this.anims.create({key:n.bolts2_run,frames:this.anims.generateFrameNumbers("laser-bolts",{frames:[0,1]}),repeat:-1,frameRate:7}),this.anims.create({key:n.explosion_run,frameRate:20,frames:this.anims.generateFrameNumbers("ship",{start:9,end:17})})}create(){this.createAnimations(),this.scene.start("MainScene")}}var n=(i=>(i.ship_run="ship_run",i["enemy-small_run"]="enemy-small_run",i["enemy-medium_run"]="enemy-medium_run",i["enemy-big_run"]="enemy-big_run",i.bolts1_run="bolts1_run",i.bolts2_run="bolts2_run",i.explosion_run="explosion_run",i))(n||{});const P={audio:[{key:"001",url:"001.wav"},{key:"Explode1",url:"Explode1.wav"},{key:"Hit_Hurt2",url:"Hit_Hurt2.wav"},{key:"Jump1",url:"Jump1.wav"},{key:"Laser_002",url:"Laser_002.wav"},{key:"music",url:"music.wav"}],sprites:[{key:"enemy-big",url:"enemy-big.bmp",frame:{frameWidth:32,frameHeight:32}},{key:"enemy-medium",url:"enemy-medium.bmp",frame:{frameWidth:32,frameHeight:16}},{key:"enemy-small",url:"enemy-small.bmp",frame:{frameWidth:16,frameHeight:16}},{key:"explosion",url:"explosion.bmp",frame:{frameWidth:16,frameHeight:16}},{key:"laser-bolts",url:"laser-bolts.bmp",frame:{frameWidth:16,frameHeight:16}},{key:"pixelspritefont32",url:"pixelspritefont32.bmp",frame:{frameWidth:16,frameHeight:24}},{key:"ship",url:"space-shooter.png",frame:{frameWidth:128,frameHeight:128}}],image:[{key:"desert-background",url:"desert-background.png"}]},E=800,C=600,d=2;console.log("version",k);const N=new c.exports.Game({type:Phaser.AUTO,scene:[v,_],antialias:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:E,height:C},physics:{default:"arcade",arcade:{gravity:{y:0}}}});window.g_game=N;
