var p=Object.defineProperty;var u=(r,s,t)=>s in r?p(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var o=(r,s,t)=>(u(r,typeof s!="symbol"?s+"":s,t),t);import{P as h,p as m}from"./vendor.74e0ef5f.js";const y=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(e){if(e.ep)return;e.ep=!0;const a=t(e);fetch(e.href,a)}};y();class d extends h.Scene{constructor(){super({key:"MainScene"});o(this,"speed",5);o(this,"bulletSpeed",10);o(this,"bg");o(this,"player");o(this,"enemySmall");o(this,"enemyMedium");o(this,"enemyBig");o(this,"cursor");o(this,"boltsGroup");o(this,"enemyGroup")}create(){this.sound.play("music",{loop:!0,volume:.2}),this.boltsGroup=this.physics.add.group(),this.enemyGroup=this.physics.add.group(),this.bg=this.add.tileSprite(0,0,256,608,"desert-background").setDisplaySize(this.scale.width,this.scale.height).setOrigin(0),this.player=this.physics.add.sprite(this.scale.width/2,this.scale.height-32,"ship").setAlpha(0).setCollideWorldBounds().setScale(2).play(i.ship_run),this.player.body.enable=!1,this.tweens.add({targets:this.player,y:"-=60",alpha:1,onComplete:()=>{this.player.body.enable=!0}}),this.enemySmall=this.physics.add.sprite(200,500,"enemy-small").setScale(2).play(i["enemy-small_run"]),this.enemyMedium=this.physics.add.sprite(200,30,"enemy-medium").setScale(2).play(i["enemy-medium_run"]),this.enemyBig=this.physics.add.sprite(200,100,"enemy-big").setScale(2).play(i["enemy-big_run"]),this.physics.collide(this.player,this.enemySmall),this.physics.collide(this.boltsGroup,this.enemySmall),this.cursor=this.input.keyboard.createCursorKeys(),this.enemyGroup.add(this.enemySmall),this.enemyGroup.add(this.enemyMedium),this.enemyGroup.add(this.enemyBig),this.physics.add.overlap(this.boltsGroup,this.enemyGroup,(s,t)=>{s.destroy(),t.body.enable=!1,this.anims.play({key:"explosion_run"},t),this.sound.play("Explode1"),t.once(h.Animations.Events.ANIMATION_COMPLETE,()=>{t.destroy()})}),this.physics.add.overlap(this.player,this.enemyGroup,s=>{this.anims.play({key:"explosion_run"},s),this.sound.play("Explode1"),s.body.enable=!1,s.once(h.Animations.Events.ANIMATION_COMPLETE,()=>{this.player.setAlpha(0),this.player.setX(this.scale.width/2),this.player.setY(this.scale.height-32),this.anims.play({key:"ship_run"},s),this.player.setAlpha(1);const t=this.tweens.add({targets:this.player,y:"-=60",duration:400,alpha:{from:1,to:0},onComplete:()=>{s.body.enable=!0,this.player.setAlpha(1),t.remove()}})})})}shooter(){console.log("shooter"),this.sound.play("Laser_002"),this.boltsGroup.add(this.add.sprite(this.player.x,this.player.y-(12+20),"laser-bolts").setScale(2).play(i.bolts1_run))}checkBolts(){this.boltsGroup.children.each(s=>{const t=s;t.y<0?t.destroy():t.y-=this.bulletSpeed})}update(){this.bg.tilePositionY-=1,this.cursor.up.isDown&&(this.player.y-=this.speed),this.cursor.down.isDown&&(this.player.y+=this.speed),this.cursor.left.isDown&&(this.player.x-=this.speed),this.cursor.right.isDown&&(this.player.x+=this.speed),this.cursor.space.isDown&&(this.cursor.space.duration<=0&&this.shooter(),this.cursor.space.duration=this.cursor.space.getDuration()),this.checkBolts()}}class c extends m.exports.Scene{constructor(){super({key:"Preload"})}preload(){const s=this.add.text(this.scale.width/2,this.scale.height/2,"0%").setOrigin(.5);Object.entries(f).forEach(([t,n])=>{switch(this.load.setBaseURL("./assets"),t){case"audio":n.forEach(e=>{this.load.audio(e.key,"audio/"+e.url)});break;case"sprites":n.forEach(e=>{this.load.spritesheet(e.key,"sprites/"+e.url,e.frame)});break;case"image":n.forEach(e=>{this.load.image(e.key,"image/"+e.url)});break}}),this.load.on(m.exports.Loader.Events.PROGRESS,t=>{s.setText(`${parseInt(String(t*100))}%`)})}createAnimations(){this.anims.create({key:i.ship_run,frames:this.anims.generateFrameNumbers("ship",{}),repeat:-1,frameRate:10}),this.anims.create({key:i["enemy-small_run"],frames:this.anims.generateFrameNumbers("enemy-small",{}),repeat:-1,frameRate:10}),this.anims.create({key:i["enemy-medium_run"],frames:this.anims.generateFrameNumbers("enemy-medium",{}),repeat:-1,frameRate:10}),this.anims.create({key:i["enemy-big_run"],frames:this.anims.generateFrameNumbers("enemy-big",{}),repeat:-1,frameRate:10}),this.anims.create({key:i.bolts1_run,frames:this.anims.generateFrameNumbers("laser-bolts",{frames:[2,3]}),repeat:-1,frameRate:7}),this.anims.create({key:i.bolts2_run,frames:this.anims.generateFrameNumbers("laser-bolts",{frames:[0,1]}),repeat:-1,frameRate:7}),this.anims.create({key:i.explosion_run,frames:this.anims.generateFrameNumbers("explosion",{})})}create(){this.createAnimations(),this.scene.start("MainScene")}}var i=(r=>(r.ship_run="ship_run",r["enemy-small_run"]="enemy-small_run",r["enemy-medium_run"]="enemy-medium_run",r["enemy-big_run"]="enemy-big_run",r.bolts1_run="bolts1_run",r.bolts2_run="bolts2_run",r.explosion_run="explosion_run",r))(i||{});const f={audio:[{key:"Explode1",url:"Explode1.wav"},{key:"Hit_Hurt2",url:"Hit_Hurt2.wav"},{key:"Jump1",url:"Jump1.wav"},{key:"Laser_002",url:"Laser_002.wav"},{key:"music",url:"music.wav"}],sprites:[{key:"enemy-big",url:"enemy-big.bmp",frame:{frameWidth:32,frameHeight:32}},{key:"enemy-medium",url:"enemy-medium.bmp",frame:{frameWidth:32,frameHeight:16}},{key:"enemy-small",url:"enemy-small.bmp",frame:{frameWidth:16,frameHeight:16}},{key:"explosion",url:"explosion.bmp",frame:{frameWidth:16,frameHeight:16}},{key:"laser-bolts",url:"laser-bolts.bmp",frame:{frameWidth:16,frameHeight:16}},{key:"pixelspritefont32",url:"pixelspritefont32.bmp",frame:{frameWidth:16,frameHeight:24}},{key:"ship",url:"ship.bmp",frame:{frameWidth:16,frameHeight:24}}],image:[{key:"desert-background",url:"desert-background.png"}]},b=390,g=844,_=new m.exports.Game({type:Phaser.AUTO,scene:[c,d],antialias:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:b,height:g},physics:{default:"arcade",arcade:{gravity:{y:0}}}});window.g_game=_;
